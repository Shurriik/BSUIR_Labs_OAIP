#include "solution.h"

int main() {
    setlocale(LC_ALL, "Russian");
    srand(time(0));  // Инициализация генератора случайных чисел


    // 1. Создание массива с помощью конструктора с параметрами
    cout << "1. Создание массива 1 с помощью конструктора с параметрами:" << endl;
    Array arr1(3);
    cout << "Массив создан размером 3. Теперь введите элементы:" << endl;
    arr1.input();
    arr1.print();
    cout << endl;

    // 2. Создание массива с помощью конструктора без параметров
    cout << "2. Создание массива 2 с помощью конструктора без параметров:" << endl;
    Array arr2;
    arr2.input();
    arr2.print();
    cout << endl;

    // 3. Демонстрация конструктора копирования
    cout << "3. Создание копии массива 2 с помощью конструктора копирования:" << endl;
    Array arr3 = arr2;
    cout << "Копия массива 2: ";
    arr3.print();
    cout << endl;

    // 4. Объединение массивов
    cout << "4. Объединение массивов 1 и 2:" << endl;
    Array combined = arr1.combine(arr2);
    cout << "Результат объединения: ";
    combined.print();
    cout << endl;

    // 5. Работа с отдельными элементами
    cout << "5. Работа с элементами массива:" << endl;
    cout << "Размер объединенного массива: " << combined.getSize() << endl;
    cout << "Первый элемент: " << combined.getElement(0) << endl;
    cout << "Последний элемент: " << combined.getElement(combined.getSize() - 1) << endl;
    cout << endl;

    // 6. Демонстрация глубокого копирования
    cout << "6. Демонстрация глубокого копирования (изменение элементов):" << endl;

    if (arr3.getSize() > 0) {
        cout << "Изменяем элементы в копии..." << endl;

        // Изменяем несколько элементов (включая возможные ошибки)
        arr3.changeElement(0, 100 + rand() % 900);          // Первый элемент
        arr3.changeElement(arr3.getSize() / 2, 200 + rand() % 800); // Средний элемент
        arr3.changeElement(arr3.getSize() - 1, 300 + rand() % 700); // Последний элемент

        cout << endl << "Измененная копия: ";
        arr3.print();
        cout << "Оригинал массива 2 (должен остаться неизменным): ";
        arr2.print();

    }
    else {
        cout << "Массив пуст, невозможно изменить элементы." << endl;
    }
    cout << endl;


    cout << "Программа завершена. Деструкторы будут вызваны автоматически." << endl;

    return 0;
}